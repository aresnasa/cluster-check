# Kubernetes Cluster Inventory - 统一配置文件
# 支持生产环境和演示环境的通用配置

# ===========================================
# 生产环境配置 (默认使用)
# ===========================================
[k8s_masters]
# 替换为你的实际主节点IP或主机名
master-node-1 ansible_host=192.168.1.10 ansible_user=root node_name=master-node-1
master-node-2 ansible_host=192.168.1.11 ansible_user=root node_name=master-node-2
master-node-3 ansible_host=192.168.1.12 ansible_user=root node_name=master-node-3

[k8s_cpu_workers]
# CPU Worker 节点 - 专门处理CPU密集型工作负载
cpu-worker-1 ansible_host=192.168.1.20 ansible_user=root node_name=cpu-worker-1
cpu-worker-2 ansible_host=192.168.1.21 ansible_user=root node_name=cpu-worker-2
cpu-worker-3 ansible_host=192.168.1.22 ansible_user=root node_name=cpu-worker-3

[k8s_gpu_workers]
# GPU Worker 节点 - 配备GPU，处理机器学习和计算密集型任务
gpu-worker-1 ansible_host=192.168.1.30 ansible_user=root node_name=gpu-worker-1 gpu_type=nvidia-v100
gpu-worker-2 ansible_host=192.168.1.31 ansible_user=root node_name=gpu-worker-2 gpu_type=nvidia-a100
gpu-worker-3 ansible_host=192.168.1.32 ansible_user=root node_name=gpu-worker-3 gpu_type=nvidia-rtx4090

# ===========================================
# 演示环境配置 (使用localhost模拟)
# ===========================================
[k8s_masters_demo]
# 使用localhost模拟Master节点，用于开发测试
localhost ansible_connection=local ansible_user=$USER node_name=master-demo-1

[k8s_cpu_workers_demo]
# 使用localhost模拟CPU Worker节点，用于开发测试
localhost ansible_connection=local ansible_user=$USER node_name=cpu-worker-demo-1

[k8s_gpu_workers_demo]
# 使用localhost模拟GPU Worker节点，用于开发测试
localhost ansible_connection=local ansible_user=$USER node_name=gpu-worker-demo-1 gpu_type=nvidia-demo

# ===========================================
# 全局变量配置
# ===========================================
[all:vars]
# 通用SSH配置
ansible_ssh_private_key_file=~/.ssh/id_rsa
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# Python解释器配置
ansible_python_interpreter=auto

# 集群检查通用配置
kubectl_version=v1.28.0
cleanup_temp_files=true

# 输出格式配置 (html|text|markdown) - 由命令行参数控制
# output_format=html

# 简化报告模式 (true|false) - 由命令行参数控制  
# simplified_report=false

# Markdown报告生成 (true|false) - 由命令行参数控制
# generate_markdown=false

# 结果目录配置
remote_results_dir=/tmp/cluster_check_results
local_results_dir=./cluster_check_results
local_report_dir=./report

# 检查脚本路径配置
remote_script_path=/tmp/cluster_check.sh
remote_template_path=/tmp/cluster_check.sh.j2

# ===========================================
# Master节点专用变量
# ===========================================
[k8s_masters:vars]
node_type=master
kubeconfig_file=~/.kube/config

[k8s_masters_demo:vars]
node_type=master
kubeconfig_file=~/.kube/config
ansible_become=no

# ===========================================
# CPU Worker节点专用变量
# ===========================================
[k8s_cpu_workers:vars]
node_type=cpu_worker
check_cpu_performance=true
check_memory_usage=true
check_storage_capacity=true

[k8s_cpu_workers_demo:vars]
node_type=cpu_worker
check_cpu_performance=true
check_memory_usage=true
check_storage_capacity=true
ansible_become=no

# ===========================================
# GPU Worker节点专用变量
# ===========================================
[k8s_gpu_workers:vars]
node_type=gpu_worker
check_gpu_drivers=true
check_cuda_version=true
check_gpu_memory=true
check_gpu_utilization=true
check_dcgm_health=true

[k8s_gpu_workers_demo:vars]
node_type=gpu_worker
check_gpu_drivers=true
check_cuda_version=true
check_gpu_memory=true
check_gpu_utilization=true
check_dcgm_health=true
ansible_become=no
